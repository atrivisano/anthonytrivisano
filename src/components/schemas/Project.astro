---
import { siteMetadata, formatSchemaDate } from '../../utils/siteMetadata';

interface Props {
    name: string;
    description: string;
    url: string;
    image?: string;
    datePublished?: Date | string;
    dateModified?: Date | string;
    skills?: string[];
    projectType?: string;
}

const {
    name,
    description,
    url,
    image,
    datePublished,
    dateModified = datePublished,
    skills = [],
    projectType = "Development Project"
} = Astro.props;

const projectSchema = {
    "@context": "https://schema.org",
    "@type": "CreativeWork",
    "name": name,
    "description": description,
    "url": url,
    ...(image && { "image": image }),
    ...(datePublished && { "datePublished": formatSchemaDate(datePublished) }),
    ...(dateModified && { "dateModified": formatSchemaDate(dateModified) }),
    "author": {
        "@type": "Person",
        "name": siteMetadata.person.name,
        "url": siteMetadata.siteUrl
    },
    "creator": {
        "@type": "Person",
        "name": siteMetadata.person.name
    },
    ...(skills.length > 0 && { "keywords": skills.join(", ") }),
    "workExample": projectType
};
---

<script type="application/ld+json" set:html={JSON.stringify(projectSchema)} />